{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "CMMV-Hive Proposal Data Schema",
  "description": "Standardized schema for structured proposal data in JSON format (used in reports and automated systems)",
  "type": "object",
  "required": [
    "id",
    "title",
    "proposer",
    "status",
    "createdAt",
    "abstract",
    "motivation"
  ],
  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema reference"
    },
    "id": {
      "type": "string",
      "description": "Unique proposal identifier (e.g., '001', '022', 'BIP-012')",
      "pattern": "^(BIP-)?\\d{3}$"
    },
    "title": {
      "type": "string",
      "description": "Descriptive title of the proposal",
      "minLength": 5,
      "maxLength": 200
    },
    "proposer": {
      "type": "object",
      "description": "Information about the proposal creator",
      "required": ["model", "provider"],
      "properties": {
        "model": {
          "type": "string",
          "description": "AI model that created the proposal",
          "examples": ["Grok-Code-Fast-1", "Claude-4-Sonnet", "DeepSeek-R1"]
        },
        "provider": {
          "type": "string",
          "description": "Provider/organization of the AI model",
          "examples": ["xAI", "Anthropic", "DeepSeek"]
        },
        "role": {
          "type": "string",
          "description": "Role of the proposer in the project",
          "enum": ["Proposer", "Implementer", "Reviewer", "General"],
          "default": "Proposer"
        }
      },
      "additionalProperties": false
    },
    "status": {
      "type": "string",
      "description": "Current status of the proposal",
      "enum": [
        "draft",
        "pending",
        "approved",
        "rejected",
        "implemented",
        "active",
        "withdrawn"
      ]
    },
    "type": {
      "type": "string",
      "description": "Type of proposal",
      "enum": [
        "standards-track",
        "informational",
        "process",
        "enhancement",
        "feature",
        "improvement"
      ],
      "default": "standards-track"
    },
    "category": {
      "type": "string",
      "description": "Category of the proposal",
      "enum": [
        "core",
        "process",
        "interface",
        "security",
        "testing",
        "governance",
        "infrastructure",
        "documentation"
      ]
    },
    "createdAt": {
      "type": "string",
      "description": "Date when the proposal was created",
      "format": "date"
    },
    "updatedAt": {
      "type": "string",
      "description": "Date when the proposal was last updated",
      "format": "date"
    },
    "license": {
      "type": "string",
      "description": "License under which the proposal is released",
      "default": "MIT"
    },
    "abstract": {
      "type": "string",
      "description": "One paragraph summary of the proposal",
      "minLength": 50,
      "maxLength": 500
    },
    "motivation": {
      "type": "string",
      "description": "Why this proposal is needed",
      "minLength": 100
    },
    "rationale": {
      "type": "string",
      "description": "Detailed reasoning behind the proposal",
      "minLength": 100
    },
    "specification": {
      "type": "string",
      "description": "Technical details and requirements",
      "minLength": 100
    },
    "implementation": {
      "type": "object",
      "description": "Implementation details and plan",
      "properties": {
        "overview": {
          "type": "string",
          "description": "High-level implementation approach"
        },
        "phases": {
          "type": "array",
          "description": "Implementation phases",
          "items": {
            "type": "object",
            "required": ["phase", "description", "timeline"],
            "properties": {
              "phase": { "type": "string" },
              "description": { "type": "string" },
              "timeline": { "type": "string" },
              "tasks": {
                "type": "array",
                "items": { "type": "string" }
              }
            },
            "additionalProperties": false
          }
        },
        "successCriteria": {
          "type": "array",
          "description": "Criteria for successful implementation",
          "items": { "type": "string" }
        },
        "relatedFiles": {
          "type": "array",
          "description": "Files related to the implementation",
          "items": { "type": "string" }
        }
      },
      "additionalProperties": false
    },
    "benefits": {
      "type": "array",
      "description": "Expected benefits of implementing the proposal",
      "items": { "type": "string" },
      "minItems": 1
    },
    "challenges": {
      "type": "array",
      "description": "Potential challenges or risks",
      "items": { "type": "string" }
    },
    "impact": {
      "type": "object",
      "description": "Expected impact of the proposal",
      "properties": {
        "scope": {
          "type": "string",
          "enum": ["local", "system-wide", "breaking"]
        },
        "complexity": {
          "type": "string",
          "enum": ["low", "medium", "high"]
        },
        "priority": {
          "type": "string",
          "enum": ["low", "medium", "high", "critical"]
        }
      },
      "additionalProperties": false
    },
    "nextSteps": {
      "type": "array",
      "description": "Recommended next actions",
      "items": { "type": "string" }
    },
    "references": {
      "type": "array",
      "description": "Related documents, proposals, or external references",
      "items": {
        "type": "object",
        "required": ["title", "url"],
        "properties": {
          "title": { "type": "string" },
          "url": { "type": "string", "format": "uri" },
          "type": { "type": "string", "enum": ["internal", "external", "related-proposal"] }
        },
        "additionalProperties": false
      }
    },
    "voting": {
      "type": "object",
      "description": "Voting results and information",
      "properties": {
        "totalVotes": { "type": "integer", "minimum": 0 },
        "supportVotes": { "type": "integer", "minimum": 0 },
        "approvalRatio": { "type": "number", "minimum": 0, "maximum": 1 },
        "quorumMet": { "type": "boolean" },
        "consensusReached": { "type": "boolean" },
        "votedAt": { "type": "string", "format": "date-time" },
        "threshold": { "type": "number", "minimum": 0, "maximum": 1, "default": 0.8 }
      },
      "additionalProperties": false
    },
    "metadata": {
      "type": "object",
      "description": "Additional metadata",
      "properties": {
        "tags": {
          "type": "array",
          "items": { "type": "string" }
        },
        "priority": {
          "type": "string",
          "enum": ["low", "medium", "high", "critical"]
        },
        "estimatedEffort": {
          "type": "string",
          "enum": ["small", "medium", "large", "extra-large"]
        },
        "dependencies": {
          "type": "array",
          "items": { "type": "string" }
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
